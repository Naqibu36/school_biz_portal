<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>سکول + بزنس POS پورٹل</title>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; margin: 0; padding: 0; }
    header { background: #2e7d32; color: #fff; padding: 12px; text-align: center; font-size: 20px; font-weight: bold; }
    section { background: #fff; margin: 15px; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
    h2 { margin-top: 0; color: #2e7d32; }
    input, select, button { padding: 8px; margin: 5px 0; width: 100%; box-sizing: border-box; }
    button { background: #2e7d32; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #1b5e20; }
    .hidden { display: none; }
    .data-list { margin-top: 10px; }
    .data-item { border: 1px solid #ccc; padding: 10px; margin: 5px 0; border-radius: 5px; }
    img { max-width: 100px; display:block; margin-top:5px; }
  </style>
</head>
<body>
  <header>📘 سکول + بزنس POS پورٹل</header>

  <!-- ایڈمن لاگ ان -->
  <section id="adminLoginSection">
    <h2>ایڈمن لاگ ان</h2>
    <input type="email" id="adminEmail" placeholder="ای میل">
    <input type="password" id="adminPassword" placeholder="پاسورڈ">
    <button onclick="adminLogin()">لاگ ان</button>
    <p id="adminLoginMsg"></p>
  </section>

  <!-- کسٹمر رجسٹریشن -->
  <section id="customerRegisterSection" class="hidden">
    <h2>کسٹمر رجسٹریشن</h2>
    <input type="text" id="custName" placeholder="نام">
    <input type="email" id="custEmail" placeholder="ای میل">
    <input type="password" id="custPass" placeholder="پاسورڈ">
    <button onclick="registerCustomer()">رجسٹر</button>
  </section>

  <!-- کسٹمر لاگ ان -->
  <section id="customerLoginSection" class="hidden">
    <h2>کسٹمر لاگ ان</h2>
    <input type="email" id="loginCustEmail" placeholder="ای میل">
    <input type="password" id="loginCustPass" placeholder="پاسورڈ">
    <button onclick="loginCustomer()">لاگ ان</button>
    <p id="custLoginMsg"></p>
  </section>

  <!-- کسٹمر ڈیش بورڈ -->
  <section id="customerDashboard" class="hidden">
    <h2>میرا ڈیش بورڈ</h2>
    <input type="text" id="orderDetails" placeholder="آرڈر / رسید تفصیل">
    <input type="file" id="custPhoto" accept="image/*">
    <button onclick="saveOrder()">محفوظ کریں</button>
    <div id="myOrders" class="data-list"></div>
  </section>

  <!-- ایڈمن ڈیش بورڈ -->
  <section id="adminDashboard" class="hidden">
    <h2>ایڈمن ڈیش بورڈ (تمام کسٹمرز)</h2>
    <div id="allCustomers" class="data-list"></div>
  </section>

  <!-- سکول سیکشن -->
  <section id="schoolSection">
    <h2>سکول ٹائم ٹیبل</h2>
    <form id="timetableForm">
      <label>پیریڈ منتخب کریں:</label>
      <select id="period">
        <option value="1">پیریڈ 1</option>
        <option value="2">پیریڈ 2</option>
        <option value="3">پیریڈ 3</option>
        <option value="4">پیریڈ 4</option>
        <option value="5">پیریڈ 5</option>
        <option value="6">پیریڈ 6</option>
        <option value="7">پیریڈ 7</option>
        <option value="8">پیریڈ 8</option>
      </select>
      <input type="text" id="subject" placeholder="مضمون کا نام">
      <button type="button" onclick="addSubject()">محفوظ کریں</button>
    </form>
    <div id="timetableList" class="data-list"></div>
  </section>

  <script>
    // ایڈمن لاگ ان (ڈیفالٹ ایڈمن)
    const admin = { email: "admin@example.com", password: "1234" };

    // لوکل اسٹوریج میں کسٹمرز اور آرڈرز
    let customers = JSON.parse(localStorage.getItem("customers") || "[]");

    function adminLogin() {
      let email = document.getElementById("adminEmail").value;
      let pass = document.getElementById("adminPassword").value;
      if (email === admin.email && pass === admin.password) {
        document.getElementById("adminLoginSection").classList.add("hidden");
        document.getElementById("customerRegisterSection").classList.remove("hidden");
        document.getElementById("customerLoginSection").classList.remove("hidden");
        document.getElementById("adminDashboard").classList.remove("hidden");
        loadAllCustomers();
      } else {
        document.getElementById("adminLoginMsg").innerText = "غلط ای میل یا پاسورڈ!";
      }
    }

    function registerCustomer() {
      let name = document.getElementById("custName").value;
      let email = document.getElementById("custEmail").value;
      let pass = document.getElementById("custPass").value;
      if (!name || !email || !pass) return alert("تمام فیلڈز پر کریں!");
      customers.push({ name, email, pass, orders: [] });
      localStorage.setItem("customers", JSON.stringify(customers));
      alert("رجسٹریشن مکمل!");
    }

    let currentCustomer = null;

    function loginCustomer() {
      let email = document.getElementById("loginCustEmail").value;
      let pass = document.getElementById("loginCustPass").value;
      let cust = customers.find(c => c.email === email && c.pass === pass);
      if (cust) {
        currentCustomer = cust;
        document.getElementById("customerLoginSection").classList.add("hidden");
        document.getElementById("customerDashboard").classList.remove("hidden");
        loadMyOrders();
      } else {
        document.getElementById("custLoginMsg").innerText = "لاگ ان ناکام!";
      }
    }

    function saveOrder() {
      let details = document.getElementById("orderDetails").value;
      let fileInput = document.getElementById("custPhoto");
      let photoURL = "";
      if (fileInput.files.length > 0) {
        let file = fileInput.files[0];
        photoURL = URL.createObjectURL(file);
      }
      currentCustomer.orders.push({ details, photo: photoURL });
      localStorage.setItem("customers", JSON.stringify(customers));
      loadMyOrders();
      loadAllCustomers();
    }

    function loadMyOrders() {
      let list = document.getElementById("myOrders");
      list.innerHTML = "";
      currentCustomer.orders.forEach((o, i) => {
        let div = document.createElement("div");
        div.className = "data-item";
        div.innerHTML = `<b>${o.details}</b>
          ${o.photo ? `<img src="${o.photo}">` : ""}
          <button onclick="deleteMyOrder(${i})">حذف</button>`;
        list.appendChild(div);
      });
    }

    function deleteMyOrder(index) {
      currentCustomer.orders.splice(index, 1);
      localStorage.setItem("customers", JSON.stringify(customers));
      loadMyOrders();
      loadAllCustomers();
    }

    function loadAllCustomers() {
      let list = document.getElementById("allCustomers");
      list.innerHTML = "";
      customers.forEach(c => {
        let div = document.createElement("div");
        div.className = "data-item";
        div.innerHTML = `<b>${c.name}</b> (${c.email})
          <div>${c.orders.map(o => `<p>${o.details}</p>`).join("")}</div>`;
        list.appendChild(div);
      });
    }

    // سکول ٹائم ٹیبل
    let timetable = [];
    function addSubject() {
      let period = document.getElementById("period").value;
      let subject = document.getElementById("subject").value;
      timetable.push({ period, subject });
      renderTimetable();
    }
    function renderTimetable() {
      let list = document.getElementById("timetableList");
      list.innerHTML = "";
      timetable.forEach(t => {
        let div = document.createElement("div");
        div.className = "data-item";
        div.innerText = `پیریڈ ${t.period}: ${t.subject}`;
        list.appendChild(div);
      });
    }
  </script>
</body>
</html>
