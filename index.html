<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>سکول اور بزنس پورٹل - مکمل POS</title>
<style>
  body { font-family: sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
  header { background: #2e7d32; color: white; padding: 10px; text-align: center; }
  nav { background: #388e3c; color: white; padding: 10px; text-align: center; }
  nav button { margin: 0 5px; padding: 5px 10px; cursor: pointer; }
  section { display: none; padding: 20px; }
  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  th, td { border: 1px solid #aaa; padding: 5px; text-align: center; }
  input, select { padding: 5px; margin: 5px 0; width: 100%; }
  .show { display: block; }
  .btn { background: #2e7d32; color: white; border: none; padding: 5px 10px; cursor: pointer; }
  .btn:hover { background: #1b5e20; }
</style>
</head>
<body>

<header>
  <h1>سکول اور بزنس پورٹل</h1>
</header>

<nav>
  <button onclick="showSection('school')">سکول</button>
  <button onclick="showSection('business')">بزنس</button>
</nav>

<!-- سکول سیکشن -->
<section id="school" class="show">
  <h2>سکول سیکشن</h2>
  <p>یہ سکول والا حصہ بالکل ویسا ہی ہے جیسا پہلے تھا۔</p>
  <!-- یہاں آپ پہلے والا سکول HTML رکھیں -->
</section>

<!-- بزنس سیکشن -->
<section id="business">
  <h2>بزنس POS</h2>

  <div>
    <h3>لاگ ان</h3>
    <input type="text" id="username" placeholder="یوزر نیم">
    <input type="password" id="password" placeholder="پاس ورڈ">
    <button class="btn" onclick="login()">لاگ ان</button>
  </div>

  <div id="pos-section" style="display:none;">
    <h3>کسٹمرز</h3>
    <input type="text" id="customerName" placeholder="کسٹمر کا نام">
    <button class="btn" onclick="addCustomer()">ایڈ کریں</button>
    <table id="customerTable">
      <thead>
        <tr><th>نام</th><th>ایکشن</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>پروڈکٹس</h3>
    <input type="text" id="productName" placeholder="پروڈکٹ کا نام">
    <input type="number" id="productPrice" placeholder="قیمت">
    <button class="btn" onclick="addProduct()">ایڈ کریں</button>
    <table id="productTable">
      <thead>
        <tr><th>نام</th><th>قیمت</th><th>ایکشن</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>سیلز</h3>
    <select id="saleCustomer"></select>
    <select id="saleProduct"></select>
    <input type="number" id="saleQty" placeholder="مقدار">
    <button class="btn" onclick="addSale()">سیو سیل</button>
    <table id="saleTable">
      <thead>
        <tr><th>کسٹمر</th><th>پروڈکٹ</th><th>مقدار</th><th>کل قیمت</th><th>ایکشن</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

</section>

<script>
function showSection(id){
  document.querySelectorAll('section').forEach(s => s.classList.remove('show'));
  document.getElementById(id).classList.add('show');
}

// بزنس POS لاگ ان (سادہ مثال)
function login(){
  const user = document.getElementById('username').value;
  const pass = document.getElementById('password').value;
  if(user==='admin' && pass==='1234'){
    alert('لاگ ان کامیاب');
    document.getElementById('pos-section').style.display='block';
    loadData();
  } else {
    alert('یوزر یا پاسورڈ غلط ہے');
  }
}

// LocalStorage کے لیے arrays
let customers = [];
let products = [];
let sales = [];

// لوڈ ڈیٹا
function loadData(){
  customers = JSON.parse(localStorage.getItem('customers')||'[]');
  products = JSON.parse(localStorage.getItem('products')||'[]');
  sales = JSON.parse(localStorage.getItem('sales')||'[]');
  renderCustomers();
  renderProducts();
  renderSales();
  updateSelects();
}

// کسٹمر ایڈ
function addCustomer(){
  const name = document.getElementById('customerName').value.trim();
  if(!name) return alert('نام ڈالیں');
  customers.push({name});
  saveAndRender();
  document.getElementById('customerName').value='';
}

// پروڈکٹ ایڈ
function addProduct(){
  const name = document.getElementById('productName').value.trim();
  const price = parseFloat(document.getElementById('productPrice').value);
  if(!name || isNaN(price)) return alert('نام اور قیمت ڈالیں');
  products.push({name, price});
  saveAndRender();
  document.getElementById('productName').value='';
  document.getElementById('productPrice').value='';
}

// سیلز ایڈ
function addSale(){
  const customerIndex = document.getElementById('saleCustomer').value;
  const productIndex = document.getElementById('saleProduct').value;
  const qty = parseInt(document.getElementById('saleQty').value);
  if(customerIndex==='-1' || productIndex==='-1' || isNaN(qty)) return alert('تمام فیلڈز ڈالیں');
  const customer = customers[customerIndex];
  const product = products[productIndex];
  sales.push({customer:customer.name, product:product.name, qty, total: product.price*qty});
  saveAndRender();
  document.getElementById('saleQty').value='';
}

// ڈیٹا سیو اور رینڈر
function saveAndRender(){
  localStorage.setItem('customers', JSON.stringify(customers));
  localStorage.setItem('products', JSON.stringify(products));
  localStorage.setItem('sales', JSON.stringify(sales));
  renderCustomers();
  renderProducts();
  renderSales();
  updateSelects();
}

// رینڈر کسٹمرز
function renderCustomers(){
  const tbody = document.querySelector('#customerTable tbody');
  tbody.innerHTML='';
  customers.forEach((c,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${c.name}</td><td><button onclick="deleteCustomer(${i})">حذف</button></td>`;
    tbody.appendChild(tr);
  });
}
function deleteCustomer(i){
  customers.splice(i,1);
  saveAndRender();
}

// رینڈر پروڈکٹس
function renderProducts(){
  const tbody = document.querySelector('#productTable tbody');
  tbody.innerHTML='';
  products.forEach((p,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${p.name}</td><td>${p.price}</td><td><button onclick="deleteProduct(${i})">حذف</button></td>`;
    tbody.appendChild(tr);
  });
}
function deleteProduct(i){
  products.splice(i,1);
  saveAndRender();
}

// رینڈر سیلز
function renderSales(){
  const tbody = document.querySelector('#saleTable tbody');
  tbody.innerHTML='';
  sales.forEach((s,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${s.customer}</td><td>${s.product}</td><td>${s.qty}</td><td>${s.total}</td><td><button onclick="deleteSale(${i})">حذف</button></td>`;
    tbody.appendChild(tr);
  });
}
function deleteSale(i){
  sales.splice(i,1);
  saveAndRender();
}

// اپڈیٹ سیلیکٹس
function updateSelects(){
  const saleCustomer = document.getElementById('saleCustomer');
  const saleProduct = document.getElementById('saleProduct');
  saleCustomer.innerHTML='<option value="-1">کسٹمر منتخب کریں</option>';
  saleProduct.innerHTML='<option value="-1">پروڈکٹ منتخب کریں</option>';
  customers.forEach((c,i)=>{ saleCustomer.innerHTML += `<option value="${i}">${c.name}</option>`; });
  products.forEach((p,i)=>{ saleProduct.innerHTML += `<option value="${i}">${p.name}</option>`; });
}
</script>

</body>
</html>
