<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>سکول اور بزنس پورٹل - مکمل POS</title>
<style>
body {
    font-family: sans-serif;
    background: #f5f5f5;
    margin: 0;
    padding: 0;
    direction: rtl;
}
.container {
    width: 90%;
    max-width: 1000px;
    margin: 20px auto;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
h1, h3 {
    color: #2e7d32;
}
input, button {
    padding: 10px;
    margin: 5px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
}
button {
    background: #2e7d32;
    color: white;
    cursor: pointer;
}
button:hover {
    background: #388e3c;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}
th, td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: center;
}
th {
    background: #2e7d32;
    color: white;
}
</style>
</head>
<body>

<div class="container">
    <h1>سکول + بزنس POS پورٹل</h1>

    <!-- Add Item Section -->
    <h3>نیا آئٹم شامل کریں</h3>
    <input type="text" id="itemName" placeholder="آئٹم کا نام">
    <input type="number" id="itemPrice" placeholder="قیمت" min="0">
    <input type="number" id="itemQty" placeholder="مقدار" min="1">
    <button onclick="addItem()">شامل کریں</button>

    <!-- Search Section -->
    <h3>آئٹم تلاش کریں</h3>
    <input type="text" id="searchItem" placeholder="آئٹم تلاش کریں..." onkeyup="searchItem()">

    <!-- Cart Table -->
    <h3>کارٹ</h3>
    <table id="cartTable">
        <thead>
            <tr>
                <th>#</th>
                <th>آئٹم</th>
                <th>قیمت</th>
                <th>مقدار</th>
                <th>کل</th>
                <th>عمل</th>
            </tr>
        </thead>
        <tbody>
            <!-- آئٹمز یہاں آئیں گے -->
        </tbody>
    </table>

    <!-- Monthly Report Section -->
    <button onclick="showMonthlyReport()">مہینہ وار رپورٹ دکھائیں</button>
    <div id="monthlyReport"></div>
</div>

<script>
let cart = [];

function addItem() {
    const name = document.getElementById('itemName').value.trim();
    const price = parseFloat(document.getElementById('itemPrice').value);
    const qty = parseInt(document.getElementById('itemQty').value);

    if(!name || isNaN(price) || isNaN(qty)) {
        alert('براہ کرم تمام فیلڈز درست بھریں');
        return;
    }

    cart.push({name, price, qty, date: new Date()});
    updateCart();
    document.getElementById('itemName').value = '';
    document.getElementById('itemPrice').value = '';
    document.getElementById('itemQty').value = '';
}

function updateCart() {
    const tbody = document.querySelector('#cartTable tbody');
    tbody.innerHTML = '';
    cart.forEach((item, index) => {
        const row = tbody.insertRow();
        row.insertCell(0).innerText = index + 1;
        row.insertCell(1).innerText = item.name;
        row.insertCell(2).innerText = item.price.toFixed(2);
        row.insertCell(3).innerText = item.qty;
        row.insertCell(4).innerText = (item.price * item.qty).toFixed(2);
        const actionCell = row.insertCell(5);
        actionCell.innerHTML = `<button onclick="deleteItem(${index})" style="background:red;">حذف</button>`;
    });
}

function deleteItem(index) {
    if(confirm('کیا آپ واقعی حذف کرنا چاہتے ہیں؟')) {
        cart.splice(index,1);
        updateCart();
    }
}

function searchItem() {
    const query = document.getElementById('searchItem').value.toLowerCase();
    const tbody = document.querySelector('#cartTable tbody');
    Array.from(tbody.rows).forEach(row => {
        const itemName = row.cells[1].innerText.toLowerCase();
        row.style.display = itemName.includes(query) ? '' : 'none';
    });
}

function showMonthlyReport() {
    const today = new Date();
    const currentMonth = today.getMonth();
    const currentYear = today.getFullYear();

    let total = 0;
    let reportHTML = `<h3>مہینہ وار رپورٹ (${currentMonth+1}/${currentYear})</h3>`;
    reportHTML += `<table border="1" style="width:100%; border-collapse: collapse;">
        <tr><th>#</th><th>آئٹم</th><th>قیمت</th><th>مقدار</th><th>کل</th></tr>`;

    cart.forEach((item,index)=>{
        const itemMonth = item.date.getMonth();
        const itemYear = item.date.getFullYear();
        if(itemMonth === currentMonth && itemYear === currentYear){
            const itemTotal = item.price * item.qty;
            total += itemTotal;
            reportHTML += `<tr>
                <td>${index+1}</td>
                <td>${item.name}</td>
                <td>${item.price.toFixed(2)}</td>
                <td>${item.qty}</td>
                <td>${itemTotal.toFixed(2)}</td>
            </tr>`;
        }
    });

    reportHTML += `<tr><td colspan="4"><strong>کل رقم</strong></td><td>${total.toFixed(2)}</td></tr></table>`;
    document.getElementById('monthlyReport').innerHTML = reportHTML;
}
</script>

</body>
</html>
