<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø³Ú©ÙˆÙ„ + Ø¨Ø²Ù†Ø³ POS Ù¾ÙˆØ±Ù¹Ù„</title>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; margin: 0; padding: 0; }
    header { background: #2e7d32; color: #fff; padding: 12px; text-align: center; font-size: 20px; font-weight: bold; }
    section { background: #fff; margin: 15px; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
    h2 { margin-top: 0; color: #2e7d32; }
    input, select, button { padding: 8px; margin: 5px 0; width: 100%; box-sizing: border-box; }
    button { background: #2e7d32; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #1b5e20; }
    .hidden { display: none; }
    .data-list { margin-top: 10px; }
    .data-item { border: 1px solid #ccc; padding: 10px; margin: 5px 0; border-radius: 5px; }
    img { max-width: 100px; display:block; margin-top:5px; }
  </style>
</head>
<body>
  <header>ğŸ“˜ Ø³Ú©ÙˆÙ„ + Ø¨Ø²Ù†Ø³ POS Ù¾ÙˆØ±Ù¹Ù„</header>

  <!-- Ø§ÛŒÚˆÙ…Ù† Ù„Ø§Ú¯ Ø§Ù† -->
  <section id="adminLoginSection">
    <h2>Ø§ÛŒÚˆÙ…Ù† Ù„Ø§Ú¯ Ø§Ù†</h2>
    <input type="email" id="adminEmail" placeholder="Ø§ÛŒ Ù…ÛŒÙ„">
    <input type="password" id="adminPassword" placeholder="Ù¾Ø§Ø³ÙˆØ±Úˆ">
    <button onclick="adminLogin()">Ù„Ø§Ú¯ Ø§Ù†</button>
    <p id="adminLoginMsg"></p>
  </section>

  <!-- Ú©Ø³Ù¹Ù…Ø± Ø±Ø¬Ø³Ù¹Ø±ÛŒØ´Ù† -->
  <section id="customerRegisterSection" class="hidden">
    <h2>Ú©Ø³Ù¹Ù…Ø± Ø±Ø¬Ø³Ù¹Ø±ÛŒØ´Ù†</h2>
    <input type="text" id="custName" placeholder="Ù†Ø§Ù…">
    <input type="email" id="custEmail" placeholder="Ø§ÛŒ Ù…ÛŒÙ„">
    <input type="password" id="custPass" placeholder="Ù¾Ø§Ø³ÙˆØ±Úˆ">
    <button onclick="registerCustomer()">Ø±Ø¬Ø³Ù¹Ø±</button>
  </section>

  <!-- Ú©Ø³Ù¹Ù…Ø± Ù„Ø§Ú¯ Ø§Ù† -->
  <section id="customerLoginSection" class="hidden">
    <h2>Ú©Ø³Ù¹Ù…Ø± Ù„Ø§Ú¯ Ø§Ù†</h2>
    <input type="email" id="loginCustEmail" placeholder="Ø§ÛŒ Ù…ÛŒÙ„">
    <input type="password" id="loginCustPass" placeholder="Ù¾Ø§Ø³ÙˆØ±Úˆ">
    <button onclick="loginCustomer()">Ù„Ø§Ú¯ Ø§Ù†</button>
    <p id="custLoginMsg"></p>
  </section>

  <!-- Ú©Ø³Ù¹Ù…Ø± ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ -->
  <section id="customerDashboard" class="hidden">
    <h2>Ù…ÛŒØ±Ø§ ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ</h2>
    <input type="text" id="orderDetails" placeholder="Ø¢Ø±ÚˆØ± / Ø±Ø³ÛŒØ¯ ØªÙØµÛŒÙ„">
    <input type="file" id="custPhoto" accept="image/*">
    <button onclick="saveOrder()">Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº</button>
    <div id="myOrders" class="data-list"></div>
  </section>

  <!-- Ø§ÛŒÚˆÙ…Ù† ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ -->
  <section id="adminDashboard" class="hidden">
    <h2>Ø§ÛŒÚˆÙ…Ù† ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ (ØªÙ…Ø§Ù… Ú©Ø³Ù¹Ù…Ø±Ø²)</h2>
    <div id="allCustomers" class="data-list"></div>
  </section>

  <!-- Ø³Ú©ÙˆÙ„ Ø³ÛŒÚ©Ø´Ù† -->
  <section id="schoolSection">
    <h2>Ø³Ú©ÙˆÙ„ Ù¹Ø§Ø¦Ù… Ù¹ÛŒØ¨Ù„</h2>
    <form id="timetableForm">
      <label>Ù¾ÛŒØ±ÛŒÚˆ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº:</label>
      <select id="period">
        <option value="1">Ù¾ÛŒØ±ÛŒÚˆ 1</option>
        <option value="2">Ù¾ÛŒØ±ÛŒÚˆ 2</option>
        <option value="3">Ù¾ÛŒØ±ÛŒÚˆ 3</option>
        <option value="4">Ù¾ÛŒØ±ÛŒÚˆ 4</option>
        <option value="5">Ù¾ÛŒØ±ÛŒÚˆ 5</option>
        <option value="6">Ù¾ÛŒØ±ÛŒÚˆ 6</option>
        <option value="7">Ù¾ÛŒØ±ÛŒÚˆ 7</option>
        <option value="8">Ù¾ÛŒØ±ÛŒÚˆ 8</option>
      </select>
      <input type="text" id="subject" placeholder="Ù…Ø¶Ù…ÙˆÙ† Ú©Ø§ Ù†Ø§Ù…">
      <button type="button" onclick="addSubject()">Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº</button>
    </form>
    <div id="timetableList" class="data-list"></div>
  </section>

  <script>
    // Ø§ÛŒÚˆÙ…Ù† Ù„Ø§Ú¯ Ø§Ù† (ÚˆÛŒÙØ§Ù„Ù¹ Ø§ÛŒÚˆÙ…Ù†)
    const admin = { email: "admin@example.com", password: "1234" };

    // Ù„ÙˆÚ©Ù„ Ø§Ø³Ù¹ÙˆØ±ÛŒØ¬ Ù…ÛŒÚº Ú©Ø³Ù¹Ù…Ø±Ø² Ø§ÙˆØ± Ø¢Ø±ÚˆØ±Ø²
    let customers = JSON.parse(localStorage.getItem("customers") || "[]");

    function adminLogin() {
      let email = document.getElementById("adminEmail").value;
      let pass = document.getElementById("adminPassword").value;
      if (email === admin.email && pass === admin.password) {
        document.getElementById("adminLoginSection").classList.add("hidden");
        document.getElementById("customerRegisterSection").classList.remove("hidden");
        document.getElementById("customerLoginSection").classList.remove("hidden");
        document.getElementById("adminDashboard").classList.remove("hidden");
        loadAllCustomers();
      } else {
        document.getElementById("adminLoginMsg").innerText = "ØºÙ„Ø· Ø§ÛŒ Ù…ÛŒÙ„ ÛŒØ§ Ù¾Ø§Ø³ÙˆØ±Úˆ!";
      }
    }

    function registerCustomer() {
      let name = document.getElementById("custName").value;
      let email = document.getElementById("custEmail").value;
      let pass = document.getElementById("custPass").value;
      if (!name || !email || !pass) return alert("ØªÙ…Ø§Ù… ÙÛŒÙ„ÚˆØ² Ù¾Ø± Ú©Ø±ÛŒÚº!");
      customers.push({ name, email, pass, orders: [] });
      localStorage.setItem("customers", JSON.stringify(customers));
      alert("Ø±Ø¬Ø³Ù¹Ø±ÛŒØ´Ù† Ù…Ú©Ù…Ù„!");
    }

    let currentCustomer = null;

    function loginCustomer() {
      let email = document.getElementById("loginCustEmail").value;
      let pass = document.getElementById("loginCustPass").value;
      let cust = customers.find(c => c.email === email && c.pass === pass);
      if (cust) {
        currentCustomer = cust;
        document.getElementById("customerLoginSection").classList.add("hidden");
        document.getElementById("customerDashboard").classList.remove("hidden");
        loadMyOrders();
      } else {
        document.getElementById("custLoginMsg").innerText = "Ù„Ø§Ú¯ Ø§Ù† Ù†Ø§Ú©Ø§Ù…!";
      }
    }

    function saveOrder() {
      let details = document.getElementById("orderDetails").value;
      let fileInput = document.getElementById("custPhoto");
      let photoURL = "";
      if (fileInput.files.length > 0) {
        let file = fileInput.files[0];
        photoURL = URL.createObjectURL(file);
      }
      currentCustomer.orders.push({ details, photo: photoURL });
      localStorage.setItem("customers", JSON.stringify(customers));
      loadMyOrders();
      loadAllCustomers();
    }

    function loadMyOrders() {
      let list = document.getElementById("myOrders");
      list.innerHTML = "";
      currentCustomer.orders.forEach((o, i) => {
        let div = document.createElement("div");
        div.className = "data-item";
        div.innerHTML = `<b>${o.details}</b>
          ${o.photo ? `<img src="${o.photo}">` : ""}
          <button onclick="deleteMyOrder(${i})">Ø­Ø°Ù</button>`;
        list.appendChild(div);
      });
    }

    function deleteMyOrder(index) {
      currentCustomer.orders.splice(index, 1);
      localStorage.setItem("customers", JSON.stringify(customers));
      loadMyOrders();
      loadAllCustomers();
    }

    function loadAllCustomers() {
      let list = document.getElementById("allCustomers");
      list.innerHTML = "";
      customers.forEach(c => {
        let div = document.createElement("div");
        div.className = "data-item";
        div.innerHTML = `<b>${c.name}</b> (${c.email})
          <div>${c.orders.map(o => `<p>${o.details}</p>`).join("")}</div>`;
        list.appendChild(div);
      });
    }

    // Ø³Ú©ÙˆÙ„ Ù¹Ø§Ø¦Ù… Ù¹ÛŒØ¨Ù„
    let timetable = [];
    function addSubject() {
      let period = document.getElementById("period").value;
      let subject = document.getElementById("subject").value;
      timetable.push({ period, subject });
      renderTimetable();
    }
    function renderTimetable() {
      let list = document.getElementById("timetableList");
      list.innerHTML = "";
      timetable.forEach(t => {
        let div = document.createElement("div");
        div.className = "data-item";
        div.innerText = `Ù¾ÛŒØ±ÛŒÚˆ ${t.period}: ${t.subject}`;
        list.appendChild(div);
      });
    }
  </script>
</body>
</html>
